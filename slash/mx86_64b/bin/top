#!/bin/zsh.exe

(
  if ! /bin/toybox.exe ls -al /proc/$$/fd/ | /bin/toybox.exe grep -E " 1 \-> /dev/pty| 1 \-> /dev/tty| 1 \-> /dev/pts" >/dev/null 2>/dev/null; then
    /bin/MobaBox.exe ps1 -cols 36000 -lines 36000
  elif [ "$1" = "-once" ] || [ "$2" = "-once" ]; then
    if [ "$1" = "-nocolor" ] || [ "$2" = "-nocolor" ]; then
      /bin/MobaBox.exe ps1 -cols "$COLUMNS" -lines 36000
    else
      /bin/MobaBox.exe ps2 -cols "$COLUMNS" -lines 36000
    fi
  else
    cd /tmp
    if [ "$1" = "-nocolor" ] || [ "$2" = "-nocolor" ]; then
      /bin/MobaBox.exe top1 -cols "$COLUMNS" -lines "$LINES"
    else
      /bin/MobaBox.exe top2 -cols "$COLUMNS" -lines "$LINES"
    fi
    cd -
  fi
)
